// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int    @id @default(autoincrement())
  email    String @unique
  phone    String
  name     String
  username String @unique
  password String

  @@map("users")
}

model Foods {
  id    Int   @id @default(autoincrement())
  adt   Float
  adtex Float
  chd0  Float
  chd4  Float
  chd8  Float

  Tariffs Tariff[]

  @@map("foods")
}

model Categories {
  id       Int    @id @default(autoincrement())
  initials String @unique
  name     String @unique

  TariffValues TariffValues[]

  @@map("categories")
}

model Pet {
  id          Int    @id @default(autoincrement())
  carrying    String @unique
  daily_price Float

  @@map("pets")
}

model Tariff {
  id           Int     @id @default(autoincrement())
  name         String  @unique
  product_pipe String
  active       Boolean
  order_id     Int     @unique @default(autoincrement())
  food_id      Int

  food Foods @relation(fields: [food_id], references: [id])

  TariffValues        TariffValues[]
  SpecificDates       SpecificDates[]
  tariffs_to_weekend  CommonDates[]         @relation("tariff_to_weekend")
  tariffs_to_midweek  CommonDates[]         @relation("tariff_to_midweek")
  TariffCheckInValues TariffCheckInValues[]

  @@map("tariffs")
}

model TariffValues {
  id          Int   @id @default(autoincrement())
  tariffs_id  Int
  category_id Int
  adt         Float
  adtex       Float
  chd0        Float
  chd4        Float
  chd8        Float

  tariffs    Tariff     @relation(fields: [tariffs_id], references: [id])
  categories Categories @relation(fields: [category_id], references: [id])

  @@map("tariff_values")
}

model SpecificDates {
  id         Int    @id @default(autoincrement())
  date       String @unique
  tariffs_id Int

  tariffs Tariff @relation(fields: [tariffs_id], references: [id])

  @@map("specific_dates")
}

model CommonDates {
  id                   Int    @id @default(autoincrement())
  date                 String @unique
  tariff_to_midweek_id Int
  tariff_to_weekend_id Int

  tariff_to_midweek Tariff @relation(name: "tariff_to_midweek", fields: [tariff_to_midweek_id], references: [id])
  tariff_to_weekend Tariff @relation(name: "tariff_to_weekend", fields: [tariff_to_weekend_id], references: [id])

  @@map("common_dates")
}

model Requirement {
  id    Int    @id @default(autoincrement())
  name  String @unique
  price Float

  @@map("requirements")
}

model TariffCheckInValues {
  id         Int    @id @default(autoincrement())
  tariffs_id Int
  type       String
  adt        Float
  adtex      Float
  chd0       Float
  chd4       Float
  chd8       Float

  tariffs Tariff @relation(fields: [tariffs_id], references: [id])

  @@map("tariff_checkin_values")
}
